{"version":3,"sources":["assets/images/ag-logo.png","components/AgoraVideoCall/index.jsx","assets/images/ag-login.png","utils/Validator.js","utils/Settings.js","pages/index/index.jsx","pages/meeting/index.jsx","agora.config.js","pages/App.jsx","serviceWorker.js","index.js"],"names":["tile_canvas","AgoraCanvas","props","streamInit","uid","attendeeMode","videoProfile","config","defaultConfig","streamID","audio","video","screen","stream","AgoraRTC","createStream","merge","setVideoProfile","subscribeStreamEvents","rt","client","on","evt","console","log","getId","Date","toLocaleTimeString","subscribe","err","removeStream","addStream","state","streamList","map","item","index","close","element","document","querySelector","parentNode","removeChild","tempList","splice","setState","push","repeatition","some","concat","handleCamera","e","currentTarget","classList","toggle","localStream","isVideoOn","disableVideo","enableVideo","handleMic","isAudioOn","disableAudio","enableAudio","switchDisplay","contains","length","displayMode","error","hideRemote","id","Array","from","querySelectorAll","style","display","handleExit","unpublish","stateSharing","shareClient","shareStream","leave","readyState","window","location","hash","sharingScreen","$","createClient","mode","transcode","init","appId","join","channel","streamInitSharing","publish","this","canvas","btnGroup","addEventListener","global","_toolbarToggle","clearTimeout","add","setTimeout","remove","no","dom","createElement","setAttribute","appendChild","play","player","resize","videoControlBtn","onClick","className","title","audioControlBtn","switchDisplayBtn","hideRemoteBtn","exitBtn","gridGap","alignItems","justifyItems","gridTemplateRows","gridTemplateColumns","React","Component","value","test","RESOLUTION_ARR","Index","handleChannel","val","joinBtn","handleJoin","Cookies","baseMode","keyCode","src","require","alt","onChange","placeholder","onRadioChange","onSelectChange","target","type","name","defaultChecked","disabled","href","InputChannel","validate","errorMsg","Validator","trim","handleChange","validateIcon","onInput","BaseOptions","handleSelect","msg","label","_options","content","active","message","options","aria-haspopup","aria-controls","aria-hidden","role","AdvancedOptions","handleRadio","Object","entries","split","defaultValue","Meeting","undefined","alert","AgoraVideoCall","App","exact","path","component","Boolean","hostname","match","obj","ownProps","keys","i","resArray","ReactDOM","render","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"0IAAA,OAAe,cAA0B,qC,6JCOnCA,EAAc,CAClB,EAAK,CAAC,mBACN,EAAK,CAAC,wBAAyB,yBAC/B,EAAK,CAAC,iBAAkB,iBAAkB,uBAC1C,EAAK,CACH,iBACA,iBACA,iBACA,uBAEF,EAAK,CACH,qBACA,sBACA,sBACA,sBACA,wBAEF,EAAK,CACH,qBACA,sBACA,sBACA,sBACA,sBACA,wBAEF,EAAK,CACH,qBACA,qBACA,sBACA,sBACA,sBACA,sBACA,yBAQEC,E,kDACJ,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IA4IRC,WAAa,SAACC,EAAKC,EAAcC,EAAcC,GAC7C,IAAIC,EAAgB,CAClBC,SAAUL,EACVM,OAAO,EACPC,OAAO,EACPC,QAAQ,GAGV,OAAQP,GACN,IAAK,aACHG,EAAcG,OAAQ,EACtB,MACF,IAAK,WACHH,EAAcG,OAAQ,EACtBH,EAAcE,OAAQ,EACtB,MACF,QACA,IAAK,SAIP,IAAIG,EAASC,IAASC,aAAaC,gBAAMR,EAAeD,IAExD,OADAM,EAAOI,gBAAgBX,GAChBO,GApKU,EAuKnBK,sBAAwB,WACtB,IAAIC,EAAE,eACNA,EAAGC,OAAOC,GAAG,gBAAgB,SAAUC,GACrC,IAAIT,EAASS,EAAIT,OACjBU,QAAQC,IAAI,qBAAuBX,EAAOY,SAC1CF,QAAQC,IAAI,OAAQ,IAAIE,MAAOC,sBAC/BJ,QAAQC,IAAI,aAAcX,GAC1BM,EAAGC,OAAOQ,UAAUf,GAAQ,SAAUgB,GACpCN,QAAQC,IAAI,0BAA2BK,SAI3CV,EAAGC,OAAOC,GAAG,cAAc,SAAUC,GACnCC,QAAQC,IAAI,kBAAoBF,EAAIlB,KACpCmB,QAAQC,KAAI,IAAIE,MAAOC,sBACvBJ,QAAQC,IAAIF,GACZH,EAAGW,aAAaR,EAAIlB,QAGtBe,EAAGC,OAAOC,GAAG,qBAAqB,SAAUC,GAC1C,IAAIT,EAASS,EAAIT,OACjBU,QAAQC,IAAI,+BACZD,QAAQC,KAAI,IAAIE,MAAOC,sBACvBJ,QAAQC,IAAI,yCAA2CX,EAAOY,SAC9DF,QAAQC,IAAIF,GACZH,EAAGY,UAAUlB,MAGfM,EAAGC,OAAOC,GAAG,kBAAkB,SAAUC,GACvC,IAAIT,EAASS,EAAIT,OACjBU,QAAQC,IAAI,mBAAqBX,EAAOY,SACxCF,QAAQC,KAAI,IAAIE,MAAOC,sBACvBJ,QAAQC,IAAIF,GACZH,EAAGW,aAAajB,EAAOY,aAxMR,EA4MnBK,aAAe,SAAC1B,GACd,EAAK4B,MAAMC,WAAWC,KAAI,SAACC,EAAMC,GAC/B,GAAID,EAAKV,UAAYrB,EAAK,CACxB+B,EAAKE,QACL,IAAIC,EAAUC,SAASC,cAAc,YAAcpC,GAC/CkC,GACFA,EAAQG,WAAWC,YAAYJ,GAEjC,IAAIK,EAAQ,YAAO,EAAKX,MAAMC,YAC9BU,EAASC,OAAOR,EAAO,GACvB,EAAKS,SAAS,CACZZ,WAAYU,SAvND,EA6NnBZ,UAAY,SAAClB,GAA0B,IAAlBiC,EAAiB,wDAChCC,EAAc,EAAKf,MAAMC,WAAWe,MAAK,SAACb,GAC5C,OAAOA,EAAKV,UAAYZ,EAAOY,WAE7BsB,IAGAD,EACF,EAAKD,SAAS,CACZZ,WAAY,EAAKD,MAAMC,WAAWgB,OAAO,CAACpC,MAG5C,EAAKgC,SAAS,CACZZ,WAAY,CAACpB,GAAQoC,OAAO,EAAKjB,MAAMC,gBA1O1B,EA+OnBiB,aAAe,SAACC,GACdA,EAAEC,cAAcC,UAAUC,OAAO,OACjC,EAAKC,YAAYC,YACb,EAAKD,YAAYE,eACjB,EAAKF,YAAYG,eAnPJ,EAsPnBC,UAAY,SAACR,GACXA,EAAEC,cAAcC,UAAUC,OAAO,OACjC,EAAKC,YAAYK,YACb,EAAKL,YAAYM,eACjB,EAAKN,YAAYO,eA1PJ,EA6PnBC,cAAgB,SAACZ,GAEbA,EAAEC,cAAcC,UAAUW,SAAS,aACnC,EAAKhC,MAAMC,WAAWgC,QAAU,IAIH,QAA3B,EAAKjC,MAAMkC,YACb,EAAKrB,SAAS,CAAEqB,YAAa,SACO,SAA3B,EAAKlC,MAAMkC,YACpB,EAAKrB,SAAS,CAAEqB,YAAa,QACO,UAA3B,EAAKlC,MAAMkC,aAGpB3C,QAAQ4C,MAAM,6CA3QC,EA+QnBC,WAAa,SAACjB,GACZ,KACEA,EAAEC,cAAcC,UAAUW,SAAS,aACnC,EAAKhC,MAAMC,WAAWgC,QAAU,GAFlC,CAMA,IACII,EAAK,EAAKrC,MAAMC,WAAW,EAAKD,MAAMC,WAAWgC,OAAS,GAAGxC,QAC1D6C,MAAMC,KACXhC,SAASiC,iBAAT,gCAAmDH,EAAnD,OAEGnC,KAAI,SAACC,GACmB,SAAvBA,EAAKsC,MAAMC,QACbvC,EAAKsC,MAAMC,QAAU,OAErBvC,EAAKsC,MAAMC,QAAU,aA/RR,EAoSnBC,WAAa,SAACxB,GACZ,IAAIA,EAAEC,cAAcC,UAAUW,SAAS,YAGvC,IACE,EAAK5C,QAAU,EAAKA,OAAOwD,UAAU,EAAKrB,aAC1C,EAAKA,aAAe,EAAKA,YAAYlB,QACjC,EAAKL,MAAM6C,eACb,EAAKC,aAAe,EAAKA,YAAYF,UAAU,EAAKG,aACpD,EAAKA,aAAe,EAAKA,YAAY1C,SAEvC,EAAKjB,QACH,EAAKA,OAAO4D,OACV,WACEzD,QAAQC,IAAI,+BAEd,WACED,QAAQC,IAAI,8BAbpB,QAiBE,EAAKqB,SAAS,CAAEoC,YAAY,IAC5B,EAAK7D,OAAS,KACd,EAAKmC,YAAc,KAEnB2B,OAAOC,SAASC,KAAO,KA7TR,EAiUnBC,cAAgB,SAAClC,GACf,GAAI,EAAKnB,MAAM6C,aACb,EAAKC,aAAe,EAAKA,YAAYF,UAAU,EAAKG,aACpD,EAAKA,aAAe,EAAKA,YAAY1C,QACrC,EAAKL,MAAM6C,cAAe,MACrB,CACL,EAAK7C,MAAM6C,cAAe,EAC1B,IAAIS,EAAI,EAAKpF,MAEb,EAAK4E,YAAchE,IAASyE,aAAa,CAAEC,KAAMF,EAAEG,YACnD,EAAKX,YAAYY,KAAKJ,EAAEK,OAAO,WAC7BpE,QAAQC,IAAI,+BACZ,EAAKN,wBACL,EAAK4D,YAAYc,KAAKN,EAAEK,MAAOL,EAAEO,QAASP,EAAElF,KAAK,SAACA,GAChD,EAAK4B,MAAM5B,IAAMA,EACjBmB,QAAQC,IAAI,QAAUpB,EAAM,8BAC5BmB,QAAQC,IAAI,OAAQ,IAAIE,MAAOC,sBAG/B,EAAKoD,YAAc,EAAKe,kBACtB1F,EACAkF,EAAEjF,aACFiF,EAAEhF,cAEJ,EAAKyE,YAAYW,MACf,WACyB,aAAnBJ,EAAEjF,eACJ,EAAK0B,UAAU,EAAKgD,aAAa,GACjC,EAAKD,YAAYiB,QAAQ,EAAKhB,aAAa,SAAClD,GAC1CN,QAAQC,IAAI,+BAAiCK,OAGjD,EAAKgB,SAAS,CAAEoC,YAAY,OAE9B,SAACpD,GACCN,QAAQC,IAAI,sBAAuBK,GACnC,EAAKgB,SAAS,CAAEoC,YAAY,eArWrB,EA6WnBa,kBAAoB,SAAC1F,EAAKC,EAAcC,EAAcC,GACpD,IAAIC,EAAgB,CAClBC,SAAUL,EACVM,OAAO,EACPC,OAAO,EACPC,QAAQ,GAGV,OAAQP,GACN,IAAK,aACHG,EAAcG,OAAQ,EACtB,MACF,IAAK,WACHH,EAAcG,OAAQ,EACtBH,EAAcE,OAAQ,EACtB,MACF,QACA,IAAK,SAIP,IAAIG,EAASC,IAASC,aAAaC,gBAAMR,EAAeD,IAExD,OADAM,EAAOI,gBAAgBX,GAChBO,GAlYP,EAAKO,OAAS,GACd,EAAKmC,YAAc,GACnB,EAAKuB,YAAc,GACnB,EAAKC,YAAc,GACnB,EAAK/C,MAAQ,CACXkC,YAAa,MACbjC,WAAY,GACZgD,YAAY,EACZJ,cAAc,GAVC,E,sDAcnB,WAAsB,IAAD,OACfS,EAAIU,KAAK9F,MAEb8F,KAAK5E,OAASN,IAASyE,aAAa,CAAEC,KAAMF,EAAEG,YAC9CO,KAAK5E,OAAOsE,KAAKJ,EAAEK,OAAO,WACxBpE,QAAQC,IAAI,+BACZ,EAAKN,wBACL,EAAKE,OAAOwE,KAAKN,EAAEK,MAAOL,EAAEO,QAASP,EAAElF,KAAK,SAACA,GAC3C,EAAK4B,MAAM5B,IAAMA,EACjBmB,QAAQC,IAAI,QAAUpB,EAAM,8BAC5BmB,QAAQC,IAAI,OAAQ,IAAIE,MAAOC,sBAG/B,EAAK4B,YAAc,EAAKpD,WAAWC,EAAKkF,EAAEjF,aAAciF,EAAEhF,cAC1D,EAAKiD,YAAYmC,MACf,WACyB,aAAnBJ,EAAEjF,eACJ,EAAK0B,UAAU,EAAKwB,aAAa,GACjC,EAAKnC,OAAO2E,QAAQ,EAAKxC,aAAa,SAAC1B,GACrCN,QAAQC,IAAI,+BAAiCK,OAGjD,EAAKgB,SAAS,CAAEoC,YAAY,OAE9B,SAACpD,GACCN,QAAQC,IAAI,sBAAuBK,GACnC,EAAKgB,SAAS,CAAEoC,YAAY,e,+BAOtC,WAEE,IAAIgB,EAAS1D,SAASC,cAAc,cAChC0D,EAAW3D,SAASC,cAAc,iBACtCyD,EAAOE,iBAAiB,aAAa,WAC/BC,EAAOC,gBACTC,aAAaF,EAAOC,gBAEtBH,EAAS7C,UAAUkD,IAAI,UACvBH,EAAOC,eAAiBG,YAAW,WACjCN,EAAS7C,UAAUoD,OAAO,YACzB,U,gCAUP,WAEE,IAAIR,EAAS1D,SAASC,cAAc,cAEpC,GAA+B,QAA3BwD,KAAKhE,MAAMkC,YAAuB,CACpC,IAAIwC,EAAKV,KAAKhE,MAAMC,WAAWgC,OAC/B,GAAIyC,EAAK,EAEP,YADAV,KAAKnD,SAAS,CAAEqB,YAAa,SAG/B8B,KAAKhE,MAAMC,WAAWC,KAAI,SAACC,EAAMC,GAC/B,IAAIiC,EAAKlC,EAAKV,QACVkF,EAAMpE,SAASC,cAAc,YAAc6B,GAC1CsC,KACHA,EAAMpE,SAASqE,cAAc,YACzBC,aAAa,KAAM,WAAaxC,GACpCsC,EAAIE,aAAa,QAAS,WAC1BZ,EAAOa,YAAYH,GACnBxE,EAAK4E,KAAK,WAAa1C,IAErBjC,IAAUsE,EAAK,EACjBC,EAAIE,aAAa,QAAjB,oCAEAF,EAAIE,aACF,QADF,mCAE8B,EAAI,EAAIzE,EAFtC,yFAOFD,EAAK6E,OAAOC,QAAU9E,EAAK6E,OAAOC,iBAIjC,GAA+B,SAA3BjB,KAAKhE,MAAMkC,YAAwB,CAC1C,IAAIwC,EAAKV,KAAKhE,MAAMC,WAAWgC,OAC/B+B,KAAKhE,MAAMC,WAAWC,KAAI,SAACC,EAAMC,GAC/B,IAAIiC,EAAKlC,EAAKV,QACVkF,EAAMpE,SAASC,cAAc,YAAc6B,GAC1CsC,KACHA,EAAMpE,SAASqE,cAAc,YACzBC,aAAa,KAAM,WAAaxC,GACpCsC,EAAIE,aAAa,QAAS,WAC1BZ,EAAOa,YAAYH,GACnBxE,EAAK4E,KAAK,WAAa1C,IAEzBsC,EAAIE,aAAa,QAAjB,qBAAwC7G,EAAY0G,GAAItE,KACxDD,EAAK6E,OAAOC,QAAU9E,EAAK6E,OAAOC,iBAI7BjB,KAAKhE,MAAMkC,c,kCAItB,WACE8B,KAAK5E,QAAU4E,KAAK5E,OAAOwD,UAAUoB,KAAKzC,aAC1CyC,KAAKzC,aAAeyC,KAAKzC,YAAYlB,QACjC2D,KAAKhE,MAAM6C,eACbmB,KAAKlB,aAAekB,KAAKlB,YAAYF,UAAUoB,KAAKjB,aACpDiB,KAAKjB,aAAeiB,KAAKjB,YAAY1C,SAEvC2D,KAAK5E,QACH4E,KAAK5E,OAAO4D,OACV,WACEzD,QAAQC,IAAI,+BAEd,WACED,QAAQC,IAAI,gC,oBA+PpB,WACE,IAQM0F,EACwB,UAA5BlB,KAAK9F,MAAMG,aACT,uBACE8G,QAASnB,KAAK9C,aACdkE,UAAU,yBACVC,MAAM,uBAHR,UAKE,mBAAGD,UAAU,2BACb,mBAAGA,UAAU,kCAGf,GAGEE,EACwB,aAA5BtB,KAAK9F,MAAMG,aACT,uBACE8G,QAASnB,KAAKrC,UACdyD,UAAU,yBACVC,MAAM,uBAHR,UAKE,mBAAGD,UAAU,wBACb,mBAAGA,UAAU,+BAGf,GAGEG,EACJ,sBACEJ,QAASnB,KAAKjC,cACdqD,UACEpB,KAAKhE,MAAMC,WAAWgC,OAAS,EAC3B,iCACA,wBAENoD,MAAM,sBAPR,SASE,mBAAGD,UAAU,qCAGXI,EACJ,sBACEJ,UACEpB,KAAKhE,MAAMC,WAAWgC,OAAS,GAAgC,QAA3B+B,KAAKhE,MAAMkC,YAC3C,mCACA,0BAENiD,QAASnB,KAAK5B,WACdiD,MAAM,qBAPR,SASE,mBAAGD,UAAU,iCAGXK,EACJ,sBACEN,QAASnB,KAAKrB,WACdyC,UACEpB,KAAKhE,MAAMiD,WAAa,iBAAmB,0BAE7CoC,MAAM,OALR,SAOE,mBAAGD,UAAU,4BAIjB,OACE,qBAAK/C,GAAG,YAAYI,MA3ER,CACZC,QAAS,OACTgD,QAAS,OACTC,WAAY,SACZC,aAAc,SACdC,iBAAkB,mBAClBC,oBAAqB,oBAqErB,SACE,sBAAKV,UAAU,eAAf,UACGK,EACAP,EACAI,EAEC,sBACEH,QAASnB,KAAKX,cACd+B,UAAU,wBACVC,MAAM,uBAHR,SAKE,mBAAGD,UAAU,mCAGhBG,EACAC,W,GAneeO,IAAMC,WA0ejB/H,Q,4FCzhBf,OAAe,wgB,wLCAA,G,MAAA,SACHgI,EAAOhE,GACf,OAAOgE,EAAMhE,OAASA,EACpB,EAAI,IAHK,WAKHgE,EAAOhE,GACf,OAAOgE,EAAMhE,OAASA,EACpB,EAAI,GAPK,WASHgE,GACR,MAAQ,mBAAmBC,KAAKD,GAC1B,EAAJ,GAXS,WAaFA,GACT,MAAiB,KAAVA,EACL,EAAI,GCfGE,EAAiB,CAC5B,cAAe,CAAC,IAAK,IAAK,GAAI,IAC9B,SAAU,CAAC,IAAK,IAAK,GAAI,IACzB,cAAe,CAAC,IAAK,IAAK,GAAI,KAC9B,SAAU,CAAC,IAAK,IAAK,GAAI,KACzB,SAAU,CAAC,IAAK,IAAK,GAAI,KACzB,cAAe,CAAC,IAAK,IAAK,GAAI,KAC9B,SAAU,CAAC,IAAK,IAAK,GAAI,KACzB,SAAU,CAAC,IAAK,IAAK,GAAI,KACzB,cAAe,CAAC,IAAK,IAAK,GAAI,KAC9B,SAAU,CAAC,IAAK,IAAK,GAAI,KACzB,SAAU,CAAC,IAAK,IAAK,GAAI,KACzB,SAAU,CAAC,IAAK,IAAK,GAAI,KACzB,SAAU,CAAC,IAAK,IAAK,GAAI,KACzB,SAAU,CAAC,IAAK,IAAK,GAAI,KACzB,SAAU,CAAC,IAAK,IAAK,GAAI,KACzB,UAAW,CAAC,IAAK,IAAK,GAAI,KAC1B,UAAW,CAAC,IAAK,IAAK,GAAI,KAC1B,cAAe,CAAC,IAAK,IAAK,GAAI,KAC9B,SAAU,CAAC,IAAK,IAAK,GAAI,KACzB,SAAU,CAAC,IAAK,IAAK,GAAI,KACzB,SAAU,CAAC,IAAK,IAAK,GAAI,KACzB,SAAU,CAAC,IAAK,IAAK,GAAI,KACzB,SAAU,CAAC,IAAK,IAAK,GAAI,KACzB,SAAU,CAAC,IAAK,IAAK,GAAI,KACzB,UAAW,CAAC,IAAK,IAAK,GAAI,KAC1B,cAAe,CAAC,KAAM,IAAK,GAAI,MAC/B,SAAU,CAAC,KAAM,IAAK,GAAI,MAC1B,SAAU,CAAC,KAAM,IAAK,GAAI,MAC1B,SAAU,CAAC,IAAK,IAAK,GAAI,KACzB,SAAU,CAAC,IAAK,IAAK,GAAI,MACzB,gBAAiB,CAAC,KAAM,KAAM,GAAI,MAClC,UAAW,CAAC,KAAM,KAAM,GAAI,KAC5B,UAAW,CAAC,KAAM,KAAM,GAAI,MAC5B,UAAW,CAAC,KAAM,KAAM,GAAI,MAC5B,gBAAiB,CAAC,KAAM,KAAM,GAAI,MAClC,UAAW,CAAC,KAAM,KAAM,GAAI,MAC5B,UAAW,CAAC,KAAM,KAAM,GAAI,MAC5B,OAAQ,CAAC,KAAM,KAAM,GAAI,Q,eC7BrBC,E,kDACJ,WAAYlI,GAAQ,IAAD,8BACjB,cAAMA,IAuBRmI,cAAgB,SAACC,EAAKtG,GACpB,EAAKa,SAAS,CACZgD,QAASyC,EACTC,QAASvG,KA3BM,EA+BnBwG,WAAa,WACN,EAAKxG,MAAMuG,UAGhBhH,QAAQC,IAAI,EAAKQ,OACjByG,MAAY,UAAW,EAAKzG,MAAM6D,SAClC4C,MAAY,WAAY,EAAKzG,MAAM0G,UACnCD,MAAY,YAAa,EAAKzG,MAAMyD,WACpCgD,MAAY,eAAgB,EAAKzG,MAAM3B,cACvCoI,MAAY,eAAgB,EAAKzG,MAAM1B,cACvC4E,OAAOC,SAASC,KAAO,YAvCvB,EAAKpD,MAAQ,CACXuG,SAAS,EACT1C,QAAS,GACT6C,SAAU,MACVjD,UAAW,UACXpF,aAAc,QACdC,aAAc,UARC,E,qDAanB,WAAqB,IAAD,OAClB4E,OAAOiB,iBAAiB,YAAY,SAAChD,GACrB,KAAdA,EAAEwF,SAAkB,EAAKH,kB,oBA6B7B,WAAU,IAAD,OACP,OACE,sBAAKpB,UAAU,gBAAf,UACE,qBAAKA,UAAU,cACf,qBAAKA,UAAU,UAAf,SACE,0BAASA,UAAU,gBAAnB,UACE,sBAAKA,UAAU,eAAf,UACE,qBAAKwB,IAAKC,EAAQ,IAAoCC,IAAI,KAC1D,mBAAG1B,UAAU,cAAb,2BACA,mBAAGA,UAAU,iBAAb,+DAEF,sBAAKA,UAAU,aAAf,UACE,qBAAKA,UAAU,UAAf,SACE,qBAAKA,UAAU,eAAf,SACE,cAAC,EAAD,CAAc2B,SAAU/C,KAAKqC,cAAeW,YAAY,+BAG5D,sBAAK5B,UAAU,UAAf,UACE,qBAAKA,UAAU,cAAf,SACE,cAAC,EAAD,CACE2B,SAAU,SAAAT,GAAG,OAAI,EAAKzF,SAAS,CAAE6F,SAAUJ,SAG/C,qBAAKlB,UAAU,cAAf,SACE,cAAC,EAAD,CACE6B,cAAe,SAAAX,GAAG,OAAI,EAAKzF,SAAS,CAAE4C,UAAW6C,KACjDY,eAAgB,SAAAZ,GAAG,OAAI,EAAKzF,SAAS,CAAEvC,aAAcgI,YAI3D,qBAAKlB,UAAU,UAAf,SACE,qBAAKA,UAAU,SAAf,SACE,sBAAK/C,GAAG,eAAe+C,UAAU,UAAjC,UACE,wBAAOA,UAAU,QAAjB,UACE,uBAAO2B,SAAU,SAAA5F,GAAC,OAAI,EAAKN,SAAS,CAAExC,aAAc8C,EAAEgG,OAAOlB,SAC3DA,MAAM,QAAQmB,KAAK,QACnBC,KAAK,WAAWC,gBAAc,IAChC,sBAAMlC,UAAU,cAEhB,sBAAMA,UAAU,oBAEhB,sBAAMA,UAAU,YAAhB,kDAEF,uBACA,wBAAOA,UAAU,QAAjB,UACE,uBAAO2B,SAAU,SAAA5F,GAAC,OAAI,EAAKN,SAAS,CAAExC,aAAc8C,EAAEgG,OAAOlB,SAC3DA,MAAM,aAAamB,KAAK,QACxBC,KAAK,aACP,sBAAMjC,UAAU,cAEhB,sBAAMA,UAAU,oBAEhB,sBAAMA,UAAU,YAAhB,kDAEF,uBACA,wBAAOA,UAAU,QAAjB,UACE,uBAAO2B,SAAU,SAAA5F,GAAC,OAAI,EAAKN,SAAS,CAAExC,aAAc8C,EAAEgG,OAAOlB,SAC3DA,MAAM,WAAWmB,KAAK,QACtBC,KAAK,aACP,sBAAMjC,UAAU,cAEhB,sBAAMA,UAAU,uBAEhB,sBAAMA,UAAU,YAAhB,yDAMV,qBAAKA,UAAU,eAAf,SACE,mBAAG/C,GAAG,UACJ8C,QAASnB,KAAKwC,WACde,UAAWvD,KAAKhE,MAAMuG,QACtBnB,UAAU,4BAHZ,yBAQN,sBAAKA,UAAU,YAAf,UACE,mBAAGA,UAAU,UAAUoC,KAAK,uBAA5B,SACE,mFAEF,gCACE,gFACA,sBAAMpC,UAAU,aAAhB,yC,GAjIQW,IAAMC,WAyIpByB,E,kDACJ,WAAYvJ,GAAQ,IAAD,8BACjB,cAAMA,IAORwJ,SAAW,SAACpB,GAKV,OAJA,EAAKzF,SAAS,CACZb,MAAO,GACP2H,SAAU,KAERC,EAAqBtB,EAAIuB,SAC3B,EAAKhH,SAAS,CACZ8G,SAAU,mBACV3H,MAAO,eAEF,GAEA4H,EAAoBtB,EAAIuB,OAAQ,IACvC,EAAKhH,SAAS,CACZ8G,SAAU,qBACV3H,MAAO,eAEF,GAEA4H,EAAoBtB,EAAIuB,OAAQ,KACvC,EAAKhH,SAAS,CACZ8G,SAAU,qBACV3H,MAAO,eAEF,GAEA4H,EAAoBtB,EAAIuB,SAC/B,EAAKhH,SAAS,CACZb,MAAO,YACP2H,SAAU,sEAEL,IAGP,EAAK9G,SAAS,CACZb,MAAO,gBAEF,IA7CQ,EAiDnB8H,aAAe,SAAC3G,GACd,IAAInB,EAAQ,EAAK0H,SAASvG,EAAEgG,OAAOlB,OACnC,EAAK/H,MAAM6I,SAAS5F,EAAEgG,OAAOlB,MAAOjG,IAjDpC,EAAKA,MAAQ,CACX2H,SAAU,GACV3H,MAAO,IAJQ,E,0CAsDnB,WACE,IAAI+H,EAAe,GACnB,OAAQ/D,KAAKhE,MAAMA,OACjB,QACA,IAAK,GACH+H,EAAe,GAAI,MACrB,IAAK,aACHA,EAAgB,mBAAG3C,UAAU,0BAA+B,MAC9D,IAAK,YACH2C,EAAgB,mBAAG3C,UAAU,4BAGjC,OACE,sBAAKA,UAAU,yCAAf,UACE,uBAAO4C,QAAShE,KAAK8D,aACnBzF,GAAG,UACH+C,UAAW,oBAAsBpB,KAAKhE,MAAMA,MAC5CoH,KAAK,OACLJ,YAAahD,KAAK9F,MAAM8I,cAC1B,sBAAM5B,UAAU,wBAAhB,SACE,qBAAKwB,IAAKC,EAAQ,IAAqCC,IAAI,OAE7D,sBAAM1B,UAAU,gBAAhB,SACG2C,IAEH,qBAAK3C,UAAU,eAAf,SACGpB,KAAKhE,MAAM2H,kB,GAjFK5B,IAAMC,WAwF3BiC,E,kDACJ,WAAY/J,GAAQ,IAAD,8BACjB,cAAMA,IAoBRgK,aAAe,SAAC/H,GACd,IAAIgI,EAAMhI,EAAKiI,MACX9B,EAAMnG,EAAK8F,MACf,EAAKpF,SAAS,CACZ,QAAWsH,EACX,QAAU,IAEZ,EAAKjK,MAAM6I,SAAST,IA1BpB,EAAK+B,SAAW,CACd,CACED,MAAO,aACPnC,MAAO,MACPqC,QAAS,4EAEX,CACEF,MAAO,gBACPnC,MAAO,KACPqC,QAAS,6GAGb,EAAKtI,MAAQ,CACXuI,QAAQ,EACRC,QAAS,cAhBM,E,0CA+BnB,WAAU,IAAD,OACDC,EAAUzE,KAAKqE,SAASnI,KAAI,SAACC,EAAMC,GACvC,OACE,sBAAKgF,UAAU,gBAEbD,QAAS,SAAChE,GAAD,OAAO,EAAK+G,aAAa/H,EAAMgB,IAF1C,UAGE,4BAAIhB,EAAKiI,QACT,uBACA,4BAAIjI,EAAKmI,YAJJlI,MASX,OACE,sBAAKgF,UAAWpB,KAAKhE,MAAMuI,OAAS,qBAAuB,WAA3D,UACE,qBAAKnD,UAAU,mBACbD,QAAS,kBAAM,EAAKtE,SAAS,CAAE,QAAW,EAAKb,MAAMuI,UADvD,SAEE,oBAAGlG,GAAG,WAAW+C,UAAU,oBAAoBsD,gBAAc,OAAOC,gBAAc,kBAAlF,UACE,sBAAMtG,GAAG,kBAAT,SAA4B2B,KAAKhE,MAAMwI,UACvC,sBAAMpD,UAAU,gBAAhB,SACE,mBAAGA,UAAU,6BAA6BwD,cAAY,gBAI5D,qBAAKxD,UAAU,gBAAgB/C,GAAG,kBAAkBwG,KAAK,OAAzD,SACE,qBAAKzD,UAAU,mBAAf,SACGqD,a,GA1Da1C,IAAMC,WAkE1B8C,E,kDACJ,WAAY5K,GAAQ,IAAD,8BACjB,cAAMA,IAMR6K,YAAc,SAAC5H,GACb,EAAKjD,MAAM+I,cAAc9F,EAAEgG,OAAOlB,QARjB,EAWnBiC,aAAe,SAAC/G,GACd,EAAKjD,MAAMgJ,eAAe/F,EAAEgG,OAAOlB,QAVnC,EAAKjG,MAAQ,CACXuI,QAAQ,GAHO,E,0CAenB,WAAU,IAAD,OACDE,EAAUO,OAAOC,QAAQ9C,GAAgBjG,KAAI,SAACC,EAAMC,GACxD,OACE,yBAAoB6F,MAAO9F,EAAK,GAAG+I,MAAM,KAAK,GAA9C,UAAmD/I,EAAK,GAAG,GAA3D,KAAiEA,EAAK,GAAG,GAAzE,KAA+EA,EAAK,GAAG,GAAvF,QAAgGA,EAAK,GAAG,GAAxG,SAAaC,MAGjB,OACE,sBAAKgF,UAAWpB,KAAKhE,MAAMuI,OAAS,qBAAuB,WAA3D,UACE,qBAAKnD,UAAU,mBACbD,QAAS,kBAAM,EAAKtE,SAAS,CAAE,QAAW,EAAKb,MAAMuI,UADvD,SAEE,mBAAGlG,GAAG,kBAAkB+C,UAAU,oBAAoBsD,gBAAc,OAAOC,gBAAc,kBAAzF,SACE,gDAGJ,qBAAKvD,UAAU,gBAAgB/C,GAAG,kBAAkBwG,KAAK,OAAzD,SACE,sBAAKzD,UAAU,mBAAf,UACE,qBAAKA,UAAU,gBAAf,SACE,sBAAKA,UAAU,UAAf,UACE,wBAAOA,UAAU,QAAjB,UACE,uBAAOa,MAAM,GAAGmB,KAAK,QAAQC,KAAK,YAAYN,SAAU/C,KAAK+E,cAC7D,+CAEF,wBAAO3D,UAAU,QAAjB,UACE,uBAAOa,MAAM,UAAUmB,KAAK,QAAQE,gBAAc,EAACP,SAAU/C,KAAK+E,YAAa1B,KAAK,cACpF,iDAEF,wBAAOjC,UAAU,QAAjB,UACE,uBAAOa,MAAM,eAAemB,KAAK,QAAQL,SAAU/C,KAAK+E,YAAa1B,KAAK,cAC1E,qDAIN,qBAAKjC,UAAU,gBAAf,SACE,qBAAKA,UAAU,oBAAf,SACE,wBAAQ2B,SAAU/C,KAAKkE,aAAciB,aAAa,SAAS9G,GAAG,eAAe+C,UAAU,wBAAvF,SACGqD,oB,GAnDW1C,IAAMC,WA8DrBI,I,wBC5SAgD,E,kDAtDb,WAAYlL,GAAQ,IAAD,EAQjB,OARiB,qBACjB,cAAMA,IACDI,aAAemI,MAAY,gBAAgByC,MAAM,KAAK,IAAM,SACjE,EAAKrF,QAAU4C,MAAY,YAAc,OACzC,EAAKhD,UAAYgD,MAAY,cAAgB,UAC7C,EAAKpI,aAAeoI,MAAY,iBAAmB,QACnD,EAAKC,SAAWD,MAAY,aAAe,MAC3C,EAAK9C,MCfmB,mCDgBnB,EAAKA,OAGV,EAAKvF,SAAMiL,EAXM,GASR,cAAAC,MAAM,sB,0CAKjB,WACE,OACE,sBAAKlE,UAAU,kBAAf,UACE,sBAAKA,UAAU,YAAf,UACE,sBAAKA,UAAU,iBAAf,UACE,qBACEA,UAAU,cACVwB,IAAKC,EAAQ,IACbC,IAAI,KAEN,oDAEF,sBAAK1B,UAAU,gBAAf,sBACa,sBAAM/C,GAAG,YAAT,SAAsB2B,KAAKH,gBAG1C,qBAAKuB,UAAU,UAAf,SACE,qBAAKA,UAAU,eAAf,SACE,cAACmE,EAAA,EAAD,CACEjL,aAAc0F,KAAK1F,aACnBuF,QAASG,KAAKH,QACdJ,UAAWO,KAAKP,UAChBpF,aAAc2F,KAAK3F,aACnBqI,SAAU1C,KAAK0C,SACf/C,MAAOK,KAAKL,MACZvF,IAAK4F,KAAK5F,UAIhB,sBAAKgH,UAAU,YAAf,UACE,mBAAGA,UAAU,UAAUoC,KAAK,uBAA5B,SACE,mFAEF,+F,GAhDYzB,IAAMC,WEcbwD,E,4JAZb,WACE,OACE,cAAC,IAAD,UACE,sBAAKpE,UAAU,OAAf,UACE,cAAC,IAAD,CAAOqE,OAAK,EAACC,KAAK,IAAIC,UAAWvD,IACjC,cAAC,IAAD,CAAOsD,KAAK,WAAWC,UAAWP,a,GAN1BpD,aCIE4D,QACW,cAA7B1G,OAAOC,SAAS0G,UAEe,UAA7B3G,OAAOC,SAAS0G,UAEhB3G,OAAOC,SAAS0G,SAASC,MACvB,2DCXCd,OAAOC,UACZD,OAAOC,QAAU,SAAUc,GAIzB,IAHA,IAAIC,EAAWhB,OAAOiB,KAAMF,GACxBG,EAAIF,EAAS/H,OACbkI,EAAW,IAAI7H,MAAM4H,GAClBA,KACLC,EAASD,GAAK,CAACF,EAASE,GAAIH,EAAIC,EAASE,KAE3C,OAAOC,IAIXC,IAASC,OAAO,cAAC,EAAD,IAAS9J,SAAS+J,eAAe,SD8G3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMC,MAAK,SAAAC,GACjCA,EAAaC,kB","file":"static/js/main.840fffdc.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/ag-logo.39edbb36.png\";","import React from \"react\";\r\nimport { merge } from \"lodash\";\r\nimport AgoraRTC from \"agora-rtc-sdk\";\r\n\r\nimport \"./canvas.css\";\r\nimport \"../../assets/fonts/css/icons.css\";\r\n\r\nconst tile_canvas = {\r\n  \"1\": [\"span 12/span 24\"],\r\n  \"2\": [\"span 12/span 12/13/25\", \"span 12/span 12/13/13\"],\r\n  \"3\": [\"span 6/span 12\", \"span 6/span 12\", \"span 6/span 12/7/19\"],\r\n  \"4\": [\r\n    \"span 6/span 12\",\r\n    \"span 6/span 12\",\r\n    \"span 6/span 12\",\r\n    \"span 6/span 12/7/13\",\r\n  ],\r\n  \"5\": [\r\n    \"span 3/span 4/13/9\",\r\n    \"span 3/span 4/13/13\",\r\n    \"span 3/span 4/13/17\",\r\n    \"span 3/span 4/13/21\",\r\n    \"span 9/span 16/10/21\",\r\n  ],\r\n  \"6\": [\r\n    \"span 3/span 4/13/7\",\r\n    \"span 3/span 4/13/11\",\r\n    \"span 3/span 4/13/15\",\r\n    \"span 3/span 4/13/19\",\r\n    \"span 3/span 4/13/23\",\r\n    \"span 9/span 16/10/21\",\r\n  ],\r\n  \"7\": [\r\n    \"span 3/span 4/13/5\",\r\n    \"span 3/span 4/13/9\",\r\n    \"span 3/span 4/13/13\",\r\n    \"span 3/span 4/13/17\",\r\n    \"span 3/span 4/13/21\",\r\n    \"span 3/span 4/13/25\",\r\n    \"span 9/span 16/10/21\",\r\n  ],\r\n};\r\n\r\n/**\r\n * @prop appId uid\r\n * @prop transcode attendeeMode videoProfile channel baseMode\r\n */\r\nclass AgoraCanvas extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.client = {};\r\n    this.localStream = {};\r\n    this.shareClient = {};\r\n    this.shareStream = {};\r\n    this.state = {\r\n      displayMode: \"pip\",\r\n      streamList: [],\r\n      readyState: false,\r\n      stateSharing: false,\r\n    };\r\n  }\r\n\r\n  componentWillMount() {\r\n    let $ = this.props;\r\n    // init AgoraRTC local client\r\n    this.client = AgoraRTC.createClient({ mode: $.transcode });\r\n    this.client.init($.appId, () => {\r\n      console.log(\"AgoraRTC client initialized\");\r\n      this.subscribeStreamEvents();\r\n      this.client.join($.appId, $.channel, $.uid, (uid) => {\r\n        this.state.uid = uid;\r\n        console.log(\"User \" + uid + \" join channel successfully\");\r\n        console.log(\"At \" + new Date().toLocaleTimeString());\r\n        // create local stream\r\n        // It is not recommended to setState in function addStream\r\n        this.localStream = this.streamInit(uid, $.attendeeMode, $.videoProfile);\r\n        this.localStream.init(\r\n          () => {\r\n            if ($.attendeeMode !== \"audience\") {\r\n              this.addStream(this.localStream, true);\r\n              this.client.publish(this.localStream, (err) => {\r\n                console.log(\"Publish local stream error: \" + err);\r\n              });\r\n            }\r\n            this.setState({ readyState: true });\r\n          },\r\n          (err) => {\r\n            console.log(\"getUserMedia failed\", err);\r\n            this.setState({ readyState: true });\r\n          }\r\n        );\r\n      });\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    // add listener to control btn group\r\n    let canvas = document.querySelector(\"#ag-canvas\");\r\n    let btnGroup = document.querySelector(\".ag-btn-group\");\r\n    canvas.addEventListener(\"mousemove\", () => {\r\n      if (global._toolbarToggle) {\r\n        clearTimeout(global._toolbarToggle);\r\n      }\r\n      btnGroup.classList.add(\"active\");\r\n      global._toolbarToggle = setTimeout(function () {\r\n        btnGroup.classList.remove(\"active\");\r\n      }, 2000);\r\n    });\r\n  }\r\n\r\n  // componentWillUnmount () {\r\n  //     // remove listener\r\n  //     let canvas = document.querySelector('#ag-canvas')\r\n  //     canvas.removeEventListener('mousemove')\r\n  // }\r\n\r\n  componentDidUpdate() {\r\n    // rerendering\r\n    let canvas = document.querySelector(\"#ag-canvas\");\r\n    // pip mode (can only use when less than 4 people in channel)\r\n    if (this.state.displayMode === \"pip\") {\r\n      let no = this.state.streamList.length;\r\n      if (no > 4) {\r\n        this.setState({ displayMode: \"tile\" });\r\n        return;\r\n      }\r\n      this.state.streamList.map((item, index) => {\r\n        let id = item.getId();\r\n        let dom = document.querySelector(\"#ag-item-\" + id);\r\n        if (!dom) {\r\n          dom = document.createElement(\"section\");\r\n          dom.setAttribute(\"id\", \"ag-item-\" + id);\r\n          dom.setAttribute(\"class\", \"ag-item\");\r\n          canvas.appendChild(dom);\r\n          item.play(\"ag-item-\" + id);\r\n        }\r\n        if (index === no - 1) {\r\n          dom.setAttribute(\"style\", `grid-area: span 12/span 24/13/25`);\r\n        } else {\r\n          dom.setAttribute(\r\n            \"style\",\r\n            `grid-area: span 3/span 4/${4 + 3 * index}/25;\r\n                    z-index:1;width:calc(100% - 20px);height:calc(100% - 20px)`\r\n          );\r\n        }\r\n\r\n        item.player.resize && item.player.resize();\r\n      });\r\n    }\r\n    // tile mode\r\n    else if (this.state.displayMode === \"tile\") {\r\n      let no = this.state.streamList.length;\r\n      this.state.streamList.map((item, index) => {\r\n        let id = item.getId();\r\n        let dom = document.querySelector(\"#ag-item-\" + id);\r\n        if (!dom) {\r\n          dom = document.createElement(\"section\");\r\n          dom.setAttribute(\"id\", \"ag-item-\" + id);\r\n          dom.setAttribute(\"class\", \"ag-item\");\r\n          canvas.appendChild(dom);\r\n          item.play(\"ag-item-\" + id);\r\n        }\r\n        dom.setAttribute(\"style\", `grid-area: ${tile_canvas[no][index]}`);\r\n        item.player.resize && item.player.resize();\r\n      });\r\n    }\r\n    // screen share mode (tbd)\r\n    else if (this.state.displayMode === \"share\") {\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.client && this.client.unpublish(this.localStream);\r\n    this.localStream && this.localStream.close();\r\n    if (this.state.stateSharing) {\r\n      this.shareClient && this.shareClient.unpublish(this.shareStream);\r\n      this.shareStream && this.shareStream.close();\r\n    }\r\n    this.client &&\r\n      this.client.leave(\r\n        () => {\r\n          console.log(\"Client succeed to leave.\");\r\n        },\r\n        () => {\r\n          console.log(\"Client failed to leave.\");\r\n        }\r\n      );\r\n  }\r\n\r\n  streamInit = (uid, attendeeMode, videoProfile, config) => {\r\n    let defaultConfig = {\r\n      streamID: uid,\r\n      audio: true,\r\n      video: true,\r\n      screen: false,\r\n    };\r\n\r\n    switch (attendeeMode) {\r\n      case \"audio-only\":\r\n        defaultConfig.video = false;\r\n        break;\r\n      case \"audience\":\r\n        defaultConfig.video = false;\r\n        defaultConfig.audio = false;\r\n        break;\r\n      default:\r\n      case \"video\":\r\n        break;\r\n    }\r\n\r\n    let stream = AgoraRTC.createStream(merge(defaultConfig, config));\r\n    stream.setVideoProfile(videoProfile);\r\n    return stream;\r\n  };\r\n\r\n  subscribeStreamEvents = () => {\r\n    let rt = this;\r\n    rt.client.on(\"stream-added\", function (evt) {\r\n      let stream = evt.stream;\r\n      console.log(\"New stream added: \" + stream.getId());\r\n      console.log(\"At \" + new Date().toLocaleTimeString());\r\n      console.log(\"Subscribe \", stream);\r\n      rt.client.subscribe(stream, function (err) {\r\n        console.log(\"Subscribe stream failed\", err);\r\n      });\r\n    });\r\n\r\n    rt.client.on(\"peer-leave\", function (evt) {\r\n      console.log(\"Peer has left: \" + evt.uid);\r\n      console.log(new Date().toLocaleTimeString());\r\n      console.log(evt);\r\n      rt.removeStream(evt.uid);\r\n    });\r\n\r\n    rt.client.on(\"stream-subscribed\", function (evt) {\r\n      let stream = evt.stream;\r\n      console.log(\"Got stream-subscribed event\");\r\n      console.log(new Date().toLocaleTimeString());\r\n      console.log(\"Subscribe remote stream successfully: \" + stream.getId());\r\n      console.log(evt);\r\n      rt.addStream(stream);\r\n    });\r\n\r\n    rt.client.on(\"stream-removed\", function (evt) {\r\n      let stream = evt.stream;\r\n      console.log(\"Stream removed: \" + stream.getId());\r\n      console.log(new Date().toLocaleTimeString());\r\n      console.log(evt);\r\n      rt.removeStream(stream.getId());\r\n    });\r\n  };\r\n\r\n  removeStream = (uid) => {\r\n    this.state.streamList.map((item, index) => {\r\n      if (item.getId() === uid) {\r\n        item.close();\r\n        let element = document.querySelector(\"#ag-item-\" + uid);\r\n        if (element) {\r\n          element.parentNode.removeChild(element);\r\n        }\r\n        let tempList = [...this.state.streamList];\r\n        tempList.splice(index, 1);\r\n        this.setState({\r\n          streamList: tempList,\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  addStream = (stream, push = false) => {\r\n    let repeatition = this.state.streamList.some((item) => {\r\n      return item.getId() === stream.getId();\r\n    });\r\n    if (repeatition) {\r\n      return;\r\n    }\r\n    if (push) {\r\n      this.setState({\r\n        streamList: this.state.streamList.concat([stream]),\r\n      });\r\n    } else {\r\n      this.setState({\r\n        streamList: [stream].concat(this.state.streamList),\r\n      });\r\n    }\r\n  };\r\n\r\n  handleCamera = (e) => {\r\n    e.currentTarget.classList.toggle(\"off\");\r\n    this.localStream.isVideoOn()\r\n      ? this.localStream.disableVideo()\r\n      : this.localStream.enableVideo();\r\n  };\r\n\r\n  handleMic = (e) => {\r\n    e.currentTarget.classList.toggle(\"off\");\r\n    this.localStream.isAudioOn()\r\n      ? this.localStream.disableAudio()\r\n      : this.localStream.enableAudio();\r\n  };\r\n\r\n  switchDisplay = (e) => {\r\n    if (\r\n      e.currentTarget.classList.contains(\"disabled\") ||\r\n      this.state.streamList.length <= 1\r\n    ) {\r\n      return;\r\n    }\r\n    if (this.state.displayMode === \"pip\") {\r\n      this.setState({ displayMode: \"tile\" });\r\n    } else if (this.state.displayMode === \"tile\") {\r\n      this.setState({ displayMode: \"pip\" });\r\n    } else if (this.state.displayMode === \"share\") {\r\n      // do nothing or alert, tbd\r\n    } else {\r\n      console.error(\"Display Mode can only be tile/pip/share\");\r\n    }\r\n  };\r\n\r\n  hideRemote = (e) => {\r\n    if (\r\n      e.currentTarget.classList.contains(\"disabled\") ||\r\n      this.state.streamList.length <= 1\r\n    ) {\r\n      return;\r\n    }\r\n    let list;\r\n    let id = this.state.streamList[this.state.streamList.length - 1].getId();\r\n    list = Array.from(\r\n      document.querySelectorAll(`.ag-item:not(#ag-item-${id})`)\r\n    );\r\n    list.map((item) => {\r\n      if (item.style.display !== \"none\") {\r\n        item.style.display = \"none\";\r\n      } else {\r\n        item.style.display = \"block\";\r\n      }\r\n    });\r\n  };\r\n\r\n  handleExit = (e) => {\r\n    if (e.currentTarget.classList.contains(\"disabled\")) {\r\n      return;\r\n    }\r\n    try {\r\n      this.client && this.client.unpublish(this.localStream);\r\n      this.localStream && this.localStream.close();\r\n      if (this.state.stateSharing) {\r\n        this.shareClient && this.shareClient.unpublish(this.shareStream);\r\n        this.shareStream && this.shareStream.close();\r\n      }\r\n      this.client &&\r\n        this.client.leave(\r\n          () => {\r\n            console.log(\"Client succeed to leave.\");\r\n          },\r\n          () => {\r\n            console.log(\"Client failed to leave.\");\r\n          }\r\n        );\r\n    } finally {\r\n      this.setState({ readyState: false });\r\n      this.client = null;\r\n      this.localStream = null;\r\n      // redirect to index\r\n      window.location.hash = \"\";\r\n    }\r\n  };\r\n\r\n  sharingScreen = (e) => {\r\n    if (this.state.stateSharing) {\r\n      this.shareClient && this.shareClient.unpublish(this.shareStream);\r\n      this.shareStream && this.shareStream.close();\r\n      this.state.stateSharing = false;\r\n    } else {\r\n      this.state.stateSharing = true;\r\n      let $ = this.props;\r\n      // init AgoraRTC local client\r\n      this.shareClient = AgoraRTC.createClient({ mode: $.transcode });\r\n      this.shareClient.init($.appId, () => {\r\n        console.log(\"AgoraRTC client initialized\");\r\n        this.subscribeStreamEvents();\r\n        this.shareClient.join($.appId, $.channel, $.uid, (uid) => {\r\n          this.state.uid = uid;\r\n          console.log(\"User \" + uid + \" join channel successfully\");\r\n          console.log(\"At \" + new Date().toLocaleTimeString());\r\n          // create local stream\r\n          // It is not recommended to setState in function addStream\r\n          this.shareStream = this.streamInitSharing(\r\n            uid,\r\n            $.attendeeMode,\r\n            $.videoProfile\r\n          );\r\n          this.shareStream.init(\r\n            () => {\r\n              if ($.attendeeMode !== \"audience\") {\r\n                this.addStream(this.shareStream, true);\r\n                this.shareClient.publish(this.shareStream, (err) => {\r\n                  console.log(\"Publish local stream error: \" + err);\r\n                });\r\n              }\r\n              this.setState({ readyState: true });\r\n            },\r\n            (err) => {\r\n              console.log(\"getUserMedia failed\", err);\r\n              this.setState({ readyState: true });\r\n            }\r\n          );\r\n        });\r\n      });\r\n    }\r\n  };\r\n\r\n  streamInitSharing = (uid, attendeeMode, videoProfile, config) => {\r\n    let defaultConfig = {\r\n      streamID: uid,\r\n      audio: true,\r\n      video: false,\r\n      screen: true,\r\n    };\r\n\r\n    switch (attendeeMode) {\r\n      case \"audio-only\":\r\n        defaultConfig.video = false;\r\n        break;\r\n      case \"audience\":\r\n        defaultConfig.video = false;\r\n        defaultConfig.audio = false;\r\n        break;\r\n      default:\r\n      case \"video\":\r\n        break;\r\n    }\r\n\r\n    let stream = AgoraRTC.createStream(merge(defaultConfig, config));\r\n    stream.setVideoProfile(videoProfile);\r\n    return stream;\r\n  };\r\n\r\n  render() {\r\n    const style = {\r\n      display: \"grid\",\r\n      gridGap: \"10px\",\r\n      alignItems: \"center\",\r\n      justifyItems: \"center\",\r\n      gridTemplateRows: \"repeat(12, auto)\",\r\n      gridTemplateColumns: \"repeat(24, auto)\",\r\n    };\r\n    const videoControlBtn =\r\n      this.props.attendeeMode === \"video\" ? (\r\n        <span\r\n          onClick={this.handleCamera}\r\n          className=\"ag-btn videoControlBtn\"\r\n          title=\"Enable/Disable Video\"\r\n        >\r\n          <i className=\"ag-icon ag-icon-camera\"></i>\r\n          <i className=\"ag-icon ag-icon-camera-off\"></i>\r\n        </span>\r\n      ) : (\r\n        \"\"\r\n      );\r\n\r\n    const audioControlBtn =\r\n      this.props.attendeeMode !== \"audience\" ? (\r\n        <span\r\n          onClick={this.handleMic}\r\n          className=\"ag-btn audioControlBtn\"\r\n          title=\"Enable/Disable Audio\"\r\n        >\r\n          <i className=\"ag-icon ag-icon-mic\"></i>\r\n          <i className=\"ag-icon ag-icon-mic-off\"></i>\r\n        </span>\r\n      ) : (\r\n        \"\"\r\n      );\r\n\r\n    const switchDisplayBtn = (\r\n      <span\r\n        onClick={this.switchDisplay}\r\n        className={\r\n          this.state.streamList.length > 4\r\n            ? \"ag-btn displayModeBtn disabled\"\r\n            : \"ag-btn displayModeBtn\"\r\n        }\r\n        title=\"Switch Display Mode\"\r\n      >\r\n        <i className=\"ag-icon ag-icon-switch-display\"></i>\r\n      </span>\r\n    );\r\n    const hideRemoteBtn = (\r\n      <span\r\n        className={\r\n          this.state.streamList.length > 4 || this.state.displayMode !== \"pip\"\r\n            ? \"ag-btn disableRemoteBtn disabled\"\r\n            : \"ag-btn disableRemoteBtn\"\r\n        }\r\n        onClick={this.hideRemote}\r\n        title=\"Hide Remote Stream\"\r\n      >\r\n        <i className=\"ag-icon ag-icon-remove-pip\"></i>\r\n      </span>\r\n    );\r\n    const exitBtn = (\r\n      <span\r\n        onClick={this.handleExit}\r\n        className={\r\n          this.state.readyState ? \"ag-btn exitBtn\" : \"ag-btn exitBtn disabled\"\r\n        }\r\n        title=\"Exit\"\r\n      >\r\n        <i className=\"ag-icon ag-icon-leave\"></i>\r\n      </span>\r\n    );\r\n\r\n    return (\r\n      <div id=\"ag-canvas\" style={style}>\r\n        <div className=\"ag-btn-group\">\r\n          {exitBtn}\r\n          {videoControlBtn}\r\n          {audioControlBtn}\r\n          {\r\n            <span\r\n              onClick={this.sharingScreen}\r\n              className=\"ag-btn shareScreenBtn\"\r\n              title=\"Share/unShare Screen\"\r\n            >\r\n              <i className=\"ag-icon ag-icon-screen-share\"></i>\r\n            </span>\r\n          }\r\n          {switchDisplayBtn}\r\n          {hideRemoteBtn}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AgoraCanvas;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAPCAYAAAGega+EAAAABGdBTUEAALGPC/xhBQAAASFJREFUOBHNk71qAkEUhR3jDwGFpLGSCBaCjZB0VoEQErAWHyMvYKFWiiD4LFaWFmmCnW9gmyZlcCBsvqM7G2aDu9p54XDn3HPu3ZnZ3UyGCIJgBG60GIQFa1QV+Qsnuwrc7tcSwAcYgpJ6Jyg750zPaplhuwZ3YK3NzJP60L+zGL6STGhXMhVTTPlIZ2wnIizgNce1yUfIkyvE8q0x5k0d/ZjgUfSy9lTwqv/JTqbUONl0eFXH5xV1uhf0dui5J1fBBmyB5XRj8iEwt9xaGd5zXJNeIQswBGknxeJFA9bkaQ+aOgCxD9EzJxJ6LSicdEuJk0Lx8gbl2NkKLHVW8rmX/UxPnsu2hoUXDOxSmIIf8A4qQH/1J9D3UQczmvW3R/ELvLZ7YNQHvpUAAAAASUVORK5CYII=\"","export default {\r\n  minLength(value, length) {\r\n    return value.length < length ?\r\n      1 : 0\r\n  },\r\n  maxLength(value, length) {\r\n    return value.length > length ?\r\n      1 : 0\r\n  },\r\n  validChar(value) {\r\n    return !/^[0-9a-zA-Z\\_]+$/.test(value) ?\r\n      1 : 0\r\n  },\r\n  isNonEmpty(value) {\r\n    return value === '' ?\r\n      1 : 0\r\n  }\r\n}","export const RESOLUTION_ARR = {\r\n  '120p,120p_1': [160, 120, 15, 65],\r\n  '120p_3': [120, 120, 15, 50],\r\n  '180p,180p_1': [320, 180, 15, 140],\r\n  '180p_3': [180, 180, 15, 100],\r\n  '180p_4': [240, 180, 15, 120],\r\n  '240p,240p_1': [320, 240, 15, 200],\r\n  '240p_3': [240, 240, 15, 140],\r\n  '240p_4': [424, 240, 15, 220],\r\n  '360p,360p_1': [640, 360, 15, 400],\r\n  '360p_3': [360, 360, 15, 260],\r\n  '360p_4': [640, 360, 30, 600],\r\n  '360p_6': [360, 360, 30, 400],\r\n  '360p_7': [480, 360, 15, 320],\r\n  '360p_8': [480, 360, 30, 490],\r\n  '360p_9': [640, 360, 15, 800],\r\n  '360p_10': [640, 360, 24, 800],\r\n  '360p_11': [640, 360, 24, 1000],\r\n  '480p,480p_1': [640, 480, 15, 500],\r\n  '480p_2': [640, 480, 30, 1000],\r\n  '480p_3': [480, 480, 15, 400],\r\n  '480p_4': [640, 480, 30, 750],\r\n  '480p_6': [480, 480, 30, 600],\r\n  '480p_8': [848, 480, 15, 610],\r\n  '480p_9': [848, 480, 30, 930],\r\n  '480p_10': [640, 480, 10, 400],\r\n  '720p,720p_1': [1280, 720, 15, 1130],\r\n  '720p_2': [1280, 720, 15, 2080],\r\n  '720p_3': [1280, 720, 30, 1710],\r\n  '720p_5': [960, 720, 15, 910],\r\n  '720p_6': [960, 720, 30, 1380],\r\n  '1080p,1080p_1': [1920, 1080, 15, 2080],\r\n  '1080p_2': [1920, 1080, 30, 3000],\r\n  '1080p_3': [1920, 1080, 30, 3150],\r\n  '1080p_5': [1920, 1080, 60, 4780],\r\n  '1440p,1440p_1': [2560, 1440, 30, 4850],\r\n  '1440p_2': [2560, 1440, 60, 7350],\r\n  '4k,4k_1': [3840, 2160, 30, 8910],\r\n  '4k_3': [3840, 2160, 60, 13500],\r\n}\r\n\r\nexport const SHARE_ID = 1","import React from 'react'\r\nimport * as Cookies from 'js-cookie'\r\n\r\nimport '../../assets/fonts/css/icons.css'\r\nimport Validator from '../../utils/Validator'\r\nimport { RESOLUTION_ARR } from '../../utils/Settings'\r\nimport './index.css'\r\n\r\n\r\nclass Index extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      joinBtn: false,\r\n      channel: '',\r\n      baseMode: 'avc',\r\n      transcode: 'interop',\r\n      attendeeMode: 'video',\r\n      videoProfile: '480p_4',\r\n\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    window.addEventListener('keypress', (e) => {\r\n      e.keyCode === 13 && this.handleJoin()\r\n    })\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {String} val 0-9 a-z A-Z _ only \r\n   * @param {Boolean} state \r\n   */\r\n  handleChannel = (val, state) => {\r\n    this.setState({\r\n      channel: val,\r\n      joinBtn: state\r\n    })\r\n  }\r\n\r\n  handleJoin = () => {\r\n    if (!this.state.joinBtn) {\r\n      return\r\n    }\r\n    console.log(this.state)\r\n    Cookies.set('channel', this.state.channel)\r\n    Cookies.set('baseMode', this.state.baseMode)\r\n    Cookies.set('transcode', this.state.transcode)\r\n    Cookies.set('attendeeMode', this.state.attendeeMode)\r\n    Cookies.set('videoProfile', this.state.videoProfile)\r\n    window.location.hash = \"meeting\"\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"wrapper index\">\r\n        <div className=\"ag-header\"></div>\r\n        <div className=\"ag-main\">\r\n          <section className=\"login-wrapper\">\r\n            <div className=\"login-header\">\r\n              <img src={require('../../assets/images/ag-logo.png')} alt=\"\" />\r\n              <p className=\"login-title\">Kasius Groups</p>\r\n              <p className=\"login-subtitle\">Making video conference comfortable and easier</p>\r\n            </div>\r\n            <div className=\"login-body\">\r\n              <div className=\"columns\">\r\n                <div className=\"column is-12\">\r\n                  <InputChannel onChange={this.handleChannel} placeholder=\"Input a room name here\"></InputChannel>\r\n                </div>\r\n              </div>\r\n              <div className=\"columns\">\r\n                <div className=\"column is-7\">\r\n                  <BaseOptions\r\n                    onChange={val => this.setState({ baseMode: val })}>\r\n                  </BaseOptions>\r\n                </div>\r\n                <div className=\"column is-5\">\r\n                  <AdvancedOptions\r\n                    onRadioChange={val => this.setState({ transcode: val })}\r\n                    onSelectChange={val => this.setState({ videoProfile: val })}>\r\n                  </AdvancedOptions>\r\n                </div>\r\n              </div>\r\n              <div className=\"columns\">\r\n                <div className=\"column\">\r\n                  <div id=\"attendeeMode\" className=\"control\">\r\n                    <label className=\"radio\">\r\n                      <input onChange={e => this.setState({ attendeeMode: e.target.value })}\r\n                        value=\"video\" type=\"radio\"\r\n                        name=\"attendee\" defaultChecked />\r\n                      <span className=\"radio-btn\">\r\n                      </span>\r\n                      <span className=\"radio-img video\">\r\n                      </span>\r\n                      <span className=\"radio-msg\">Video Call : join with video call</span>\r\n                    </label>\r\n                    <br />\r\n                    <label className=\"radio\">\r\n                      <input onChange={e => this.setState({ attendeeMode: e.target.value })}\r\n                        value=\"audio-only\" type=\"radio\"\r\n                        name=\"attendee\" />\r\n                      <span className=\"radio-btn\">\r\n                      </span>\r\n                      <span className=\"radio-img audio\">\r\n                      </span>\r\n                      <span className=\"radio-msg\">Audio-only : join with audio call</span>\r\n                    </label>\r\n                    <br />\r\n                    <label className=\"radio\">\r\n                      <input onChange={e => this.setState({ attendeeMode: e.target.value })}\r\n                        value=\"audience\" type=\"radio\"\r\n                        name=\"attendee\" />\r\n                      <span className=\"radio-btn\">\r\n                      </span>\r\n                      <span className=\"radio-img audience\">\r\n                      </span>\r\n                      <span className=\"radio-msg\">Audience : join as an audience</span>\r\n                    </label>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"login-footer\">\r\n              <a id=\"joinBtn\"\r\n                onClick={this.handleJoin}\r\n                disabled={!this.state.joinBtn}\r\n                className=\"ag-rounded button is-info\">Join\r\n                  </a>\r\n            </div>\r\n          </section>\r\n        </div>\r\n        <div className=\"ag-footer\">\r\n          <a className=\"ag-href\" href=\"https://www.agora.io\">\r\n            <span>Powered By Agora. Made proudly by zeankun.dev</span>\r\n          </a>\r\n          <div>\r\n            <span>Interested in Agora video call SDK? Contact </span>\r\n            <span className=\"ag-contact\">sales@agora.io</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nclass InputChannel extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      errorMsg: '',\r\n      state: ''\r\n    }\r\n  }\r\n\r\n  validate = (val) => {\r\n    this.setState({\r\n      state: '',\r\n      errorMsg: ''\r\n    })\r\n    if (Validator.isNonEmpty(val.trim())) {\r\n      this.setState({\r\n        errorMsg: 'Cannot be empty!',\r\n        state: 'is-danger'\r\n      })\r\n      return false\r\n    }\r\n    else if (Validator.minLength(val.trim(), 1)) {\r\n      this.setState({\r\n        errorMsg: 'No shorter than 1!',\r\n        state: 'is-danger'\r\n      })\r\n      return false\r\n    }\r\n    else if (Validator.maxLength(val.trim(), 16)) {\r\n      this.setState({\r\n        errorMsg: 'No longer than 16!',\r\n        state: 'is-danger'\r\n      })\r\n      return false\r\n    }\r\n    else if (Validator.validChar(val.trim())) {\r\n      this.setState({\r\n        state: 'is-danger',\r\n        errorMsg: 'Only capital or lower-case letter, number and \"_\" are permitted!'\r\n      })\r\n      return false\r\n    }\r\n    else {\r\n      this.setState({\r\n        state: 'is-success'\r\n      })\r\n      return true\r\n    }\r\n  }\r\n\r\n  handleChange = (e) => {\r\n    let state = this.validate(e.target.value)\r\n    this.props.onChange(e.target.value, state)\r\n  }\r\n\r\n  render() {\r\n    let validateIcon = ''\r\n    switch (this.state.state) {\r\n      default:\r\n      case '':\r\n        validateIcon = ''; break;\r\n      case 'is-success':\r\n        validateIcon = (<i className=\"ag-icon ag-icon-valid\"></i>); break;\r\n      case 'is-danger':\r\n        validateIcon = (<i className=\"ag-icon ag-icon-invalid\"></i>); break;\r\n    }\r\n\r\n    return (\r\n      <div className=\"channel-wrapper control has-icons-left\">\r\n        <input onInput={this.handleChange}\r\n          id=\"channel\"\r\n          className={'ag-rounded input ' + this.state.state}\r\n          type=\"text\"\r\n          placeholder={this.props.placeholder} />\r\n        <span className=\"icon is-small is-left\">\r\n          <img src={require('../../assets/images/ag-login.png')} alt=\"\" />\r\n        </span>\r\n        <span className=\"validate-icon\">\r\n          {validateIcon}\r\n        </span>\r\n        <div className=\"validate-msg\">\r\n          {this.state.errorMsg}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nclass BaseOptions extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this._options = [\r\n      {\r\n        label: 'Video Chat',\r\n        value: 'avc',\r\n        content: 'Group calls. Great for meetings and classroom and studying or chit chat.'\r\n      },\r\n      {\r\n        label: 'Large Meeting',\r\n        value: 'al',\r\n        content: 'Host can interact with the audience. Great for webinars or official meetings such as president meetings.'\r\n      }\r\n    ]\r\n    this.state = {\r\n      active: false,\r\n      message: 'Video Chat',\r\n\r\n    }\r\n  }\r\n\r\n  handleSelect = (item) => {\r\n    let msg = item.label\r\n    let val = item.value\r\n    this.setState({\r\n      'message': msg,\r\n      'active': false\r\n    })\r\n    this.props.onChange(val)\r\n  }\r\n\r\n  render() {\r\n    const options = this._options.map((item, index) => {\r\n      return (\r\n        <div className=\"dropdown-item\"\r\n          key={index}\r\n          onClick={(e) => this.handleSelect(item, e)}>\r\n          <p>{item.label}</p>\r\n          <hr />\r\n          <p>{item.content}</p>\r\n        </div>\r\n      )\r\n    })\r\n\r\n    return (\r\n      <div className={this.state.active ? 'dropdown is-active' : 'dropdown'}>\r\n        <div className=\"dropdown-trigger\"\r\n          onClick={() => this.setState({ 'active': !this.state.active })}>\r\n          <a id=\"baseMode\" className=\"ag-rounded button\" aria-haspopup=\"true\" aria-controls=\"baseModeOptions\">\r\n            <span id=\"baseOptionLabel\">{this.state.message}</span>\r\n            <span className=\"icon is-small\">\r\n              <i className=\"ag-icon ag-icon-arrow-down\" aria-hidden=\"true\"></i>\r\n            </span>\r\n          </a>\r\n        </div>\r\n        <div className=\"dropdown-menu\" id=\"baseModeOptions\" role=\"menu\">\r\n          <div className=\"dropdown-content\">\r\n            {options}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nclass AdvancedOptions extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      active: false,\r\n    }\r\n  }\r\n\r\n  handleRadio = (e) => {\r\n    this.props.onRadioChange(e.target.value)\r\n  }\r\n\r\n  handleSelect = (e) => {\r\n    this.props.onSelectChange(e.target.value)\r\n  }\r\n\r\n  render() {\r\n    const options = Object.entries(RESOLUTION_ARR).map((item, index) => {\r\n      return (\r\n        <option key={index} value={item[0].split(\",\")[0]}>{item[1][0]}x {item[1][1]}, {item[1][2]}fps, {item[1][3]}kbps</option>\r\n      )\r\n    })\r\n    return (\r\n      <div className={this.state.active ? 'dropdown is-active' : 'dropdown'}>\r\n        <div className=\"dropdown-trigger\"\r\n          onClick={() => this.setState({ 'active': !this.state.active })}>\r\n          <a id=\"advancedProfile\" className=\"ag-rounded button\" aria-haspopup=\"true\" aria-controls=\"advancedOptions\">\r\n            <span>Advanced</span>\r\n          </a>\r\n        </div>\r\n        <div className=\"dropdown-menu\" id=\"advancedOptions\" role=\"menu\">\r\n          <div className=\"dropdown-content\">\r\n            <div className=\"dropdown-item\">\r\n              <div className=\"control\">\r\n                <label className=\"radio\">\r\n                  <input value=\"\" type=\"radio\" name=\"transcode\" onChange={this.handleRadio} />\r\n                  <span>VP8-only</span>\r\n                </label>\r\n                <label className=\"radio\">\r\n                  <input value=\"interop\" type=\"radio\" defaultChecked onChange={this.handleRadio} name=\"transcode\" />\r\n                  <span>VP8 &amp; H264</span>\r\n                </label>\r\n                <label className=\"radio\">\r\n                  <input value=\"h264_interop\" type=\"radio\" onChange={this.handleRadio} name=\"transcode\" />\r\n                  <span>H264-only</span>\r\n                </label>\r\n              </div>\r\n            </div>\r\n            <div className=\"dropdown-item\">\r\n              <div className=\"select is-rounded\">\r\n                <select onChange={this.handleSelect} defaultValue=\"480p_4\" id=\"videoProfile\" className=\"ag-rounded is-clipped\">\r\n                  {options}\r\n                </select>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Index","import React from \"react\";\r\nimport * as Cookies from \"js-cookie\";\r\n\r\nimport \"./meeting.css\";\r\nimport AgoraVideoCall from \"../../components/AgoraVideoCall\";\r\nimport { AGORA_APP_ID } from \"../../agora.config\";\r\n\r\nclass Meeting extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.videoProfile = Cookies.get(\"videoProfile\").split(\",\")[0] || \"480p_4\";\r\n    this.channel = Cookies.get(\"channel\") || \"test\";\r\n    this.transcode = Cookies.get(\"transcode\") || \"interop\";\r\n    this.attendeeMode = Cookies.get(\"attendeeMode\") || \"video\";\r\n    this.baseMode = Cookies.get(\"baseMode\") || \"avc\";\r\n    this.appId = AGORA_APP_ID;\r\n    if (!this.appId) {\r\n      return alert(\"Get App ID first!\");\r\n    }\r\n    this.uid = undefined;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"wrapper meeting\">\r\n        <div className=\"ag-header\">\r\n          <div className=\"ag-header-lead\">\r\n            <img\r\n              className=\"header-logo\"\r\n              src={require(\"../../assets/images/ag-logo.png\")}\r\n              alt=\"\"\r\n            />\r\n            <span>Kasius Groups</span>\r\n          </div>\r\n          <div className=\"ag-header-msg\">\r\n            Room:&nbsp;<span id=\"room-name\">{this.channel}</span>\r\n          </div>\r\n        </div>\r\n        <div className=\"ag-main\">\r\n          <div className=\"ag-container\">\r\n            <AgoraVideoCall\r\n              videoProfile={this.videoProfile}\r\n              channel={this.channel}\r\n              transcode={this.transcode}\r\n              attendeeMode={this.attendeeMode}\r\n              baseMode={this.baseMode}\r\n              appId={this.appId}\r\n              uid={this.uid}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className=\"ag-footer\">\r\n          <a className=\"ag-href\" href=\"https://www.agora.io\">\r\n            <span>Powered By Agora. Proudly made by zeankun.dev</span>\r\n          </a>\r\n          <span>Made in React.js proudly using Visual Studio Code</span>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Meeting;\r\n","export const AGORA_APP_ID = '84fc26e8663543b180a0775487b16d88' // set your app id here","import React, { Component } from 'react'\r\nimport { HashRouter as Router, Route } from 'react-router-dom'\r\nimport 'bulma/css/bulma.css'\r\n\r\nimport './App.css'\r\nimport Index from './index'\r\nimport Meeting from './meeting'\r\n\r\nclass App extends Component {\r\n  render() {\r\n    return (\r\n      <Router>\r\n        <div className=\"full\">\r\n          <Route exact path=\"/\" component={Index} />\r\n          <Route path=\"/meeting\" component={Meeting} />\r\n        </div>\r\n      </Router>\r\n    )\r\n  }\r\n}\r\n\r\nexport default App\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './pages/App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nconst polyfill = (() => {\r\n  // Object.entries\r\n  if (!Object.entries)\r\n  Object.entries = function( obj ){\r\n    var ownProps = Object.keys( obj ),\r\n        i = ownProps.length,\r\n        resArray = new Array(i); // preallocate the Array\r\n    while (i--)\r\n      resArray[i] = [ownProps[i], obj[ownProps[i]]];\r\n    \r\n    return resArray;\r\n  }\r\n})();\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}